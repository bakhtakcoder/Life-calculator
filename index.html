<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Life Progress Bar — Visualize Your Time</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0a0f1e;
    --surface: #111827;
    --surface2: #1a2235;
    --border: rgba(255,255,255,0.06);
    --text: #e8e6e0;
    --muted: #6b7280;
    --accent: #c9a96e;
    --accent-dim: rgba(201,169,110,0.15);
    --progress-bg: rgba(255,255,255,0.05);
    --progress-fill: linear-gradient(90deg, #6b5a3a, #c9a96e, #e8cc90, #c9a96e);
  }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'Cormorant Garamond', Georgia, serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  #particleCanvas {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }

  .orb {
    position: fixed;
    border-radius: 50%;
    filter: blur(90px);
    pointer-events: none;
    z-index: 0;
  }
  .orb-1 {
    width: 600px; height: 600px;
    background: radial-gradient(circle, rgba(201,169,110,0.055) 0%, transparent 70%);
    top: -180px; left: -120px;
    animation: orbFloat1 14s ease-in-out infinite;
  }
  .orb-2 {
    width: 450px; height: 450px;
    background: radial-gradient(circle, rgba(80,100,180,0.04) 0%, transparent 70%);
    bottom: -120px; right: -100px;
    animation: orbFloat2 18s ease-in-out infinite;
  }
  .orb-3 {
    width: 280px; height: 280px;
    background: radial-gradient(circle, rgba(201,169,110,0.035) 0%, transparent 70%);
    top: 55%; left: 65%;
    animation: orbFloat1 10s ease-in-out infinite reverse;
  }

  @keyframes orbFloat1 {
    0%,100% { transform: translate(0,0) scale(1); }
    40% { transform: translate(40px,-50px) scale(1.06); }
    70% { transform: translate(-25px, 25px) scale(0.94); }
  }
  @keyframes orbFloat2 {
    0%,100% { transform: translate(0,0) scale(1); }
    35% { transform: translate(-35px, 45px) scale(1.04); }
    65% { transform: translate(30px,-20px) scale(0.97); }
  }

  .grain {
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 1;
    opacity: 0.35;
  }

  /* Transition overlay */
  #transitionOverlay {
    position: fixed;
    inset: 0;
    background: var(--bg);
    z-index: 100;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  #transitionOverlay.active { opacity: 1; pointer-events: all; }

  .container {
    position: relative;
    z-index: 2;
    max-width: 760px;
    margin: 0 auto;
    padding: 0 24px;
  }

  /* ═══ LANDING ═══ */
  #landing {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 80px 0 60px;
  }

  .eyebrow {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 32px;
    opacity: 0;
    animation: slideInLeft 0.9s cubic-bezier(0.16,1,0.3,1) forwards 0.3s;
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .eyebrow-line {
    display: inline-block;
    width: 0px;
    height: 1px;
    background: var(--accent);
    animation: expandW 0.7s cubic-bezier(0.16,1,0.3,1) forwards 0.9s;
  }
  @keyframes expandW { to { width: 28px; } }

  h1 {
    font-size: clamp(2.8rem, 7vw, 5.5rem);
    font-weight: 300;
    line-height: 1.1;
    letter-spacing: -0.02em;
    margin-bottom: 24px;
    opacity: 0;
    animation: fadeUp 0.9s cubic-bezier(0.16,1,0.3,1) forwards 0.5s;
  }

  h1 em {
    font-style: italic;
    color: var(--accent);
    position: relative;
    display: inline-block;
  }

  h1 em::after {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 0;
    width: 100%;
    height: 1px;
    background: linear-gradient(90deg, var(--accent), transparent);
    transform: scaleX(0);
    transform-origin: left;
    animation: underlineExpand 0.8s ease forwards 1.4s;
  }
  @keyframes underlineExpand { to { transform: scaleX(1); } }

  .subtitle {
    font-size: 1.2rem;
    font-weight: 300;
    color: var(--muted);
    line-height: 1.6;
    max-width: 480px;
    margin-bottom: 64px;
    opacity: 0;
    animation: fadeUp 0.9s cubic-bezier(0.16,1,0.3,1) forwards 0.7s;
  }

  .form-block {
    opacity: 0;
    animation: fadeUp 0.9s cubic-bezier(0.16,1,0.3,1) forwards 0.9s;
  }

  .form-row {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    flex-wrap: wrap;
  }

  .field {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
    min-width: 200px;
  }

  label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
  }

  input[type="date"],
  select {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    padding: 14px 18px;
    border-radius: 4px;
    outline: none;
    transition: border-color 0.4s, background 0.4s, box-shadow 0.4s;
    width: 100%;
    appearance: none;
    -webkit-appearance: none;
    cursor: pointer;
  }

  input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(0.4); cursor: pointer; }

  input[type="date"]:focus,
  select:focus {
    border-color: var(--accent);
    background: var(--surface2);
    box-shadow: 0 0 0 3px rgba(201,169,110,0.07), 0 0 24px rgba(201,169,110,0.06);
  }

  /* Button */
  .btn-primary {
    margin-top: 32px;
    background: transparent;
    border: 1px solid var(--accent);
    color: var(--accent);
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.05rem;
    letter-spacing: 0.12em;
    padding: 16px 56px;
    border-radius: 3px;
    cursor: pointer;
    transition: letter-spacing 0.4s, box-shadow 0.4s, transform 0.15s;
    position: relative;
    overflow: hidden;
  }

  .btn-primary::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--accent-dim);
    transform: translateX(-102%);
    transition: transform 0.5s cubic-bezier(0.16,1,0.3,1);
  }

  /* Shimmer sweep */
  .btn-primary::after {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 60%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    transition: left 0s;
  }

  .btn-primary:hover::before { transform: translateX(0); }
  .btn-primary:hover { letter-spacing: 0.18em; box-shadow: 0 0 30px rgba(201,169,110,0.14); }
  .btn-primary:hover::after { left: 150%; transition: left 0.6s ease; }
  .btn-primary:active { transform: scale(0.975); }
  .btn-primary span { position: relative; z-index: 1; }

  /* Ripple */
  .ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(201,169,110,0.25);
    transform: scale(0);
    animation: rippleAnim 0.65s ease-out forwards;
    pointer-events: none;
  }
  @keyframes rippleAnim { to { transform: scale(4); opacity: 0; } }

  .error {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: #ef4444;
    margin-top: 12px;
    display: none;
  }
  .error.shake { animation: shake 0.4s ease; }
  @keyframes shake {
    0%,100% { transform: translateX(0); }
    25% { transform: translateX(-6px); }
    75% { transform: translateX(6px); }
  }

  /* ═══ RESULTS ═══ */
  #results {
    display: none;
    padding: 80px 0 60px;
  }

  .reveal {
    opacity: 0;
    transform: translateY(28px);
    transition: opacity 0.75s ease, transform 0.75s ease;
  }
  .reveal.in {
    opacity: 1;
    transform: translateY(0);
  }

  .section-label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 48px;
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .section-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, rgba(201,169,110,0.3), transparent);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 1s ease 0.4s;
  }
  .section-label.in::after { transform: scaleX(1); }

  /* Progress */
  .progress-section { margin-bottom: 72px; }

  .progress-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 20px;
  }

  .progress-label {
    font-size: 1rem;
    color: var(--muted);
    font-weight: 300;
  }

  .progress-pct {
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    font-weight: 300;
    letter-spacing: -0.03em;
    color: var(--text);
    font-variant-numeric: tabular-nums;
    text-shadow: 0 0 40px rgba(201,169,110,0.18);
  }
  .progress-pct span { font-size: 0.5em; color: var(--muted); }

  .progress-track {
    width: 100%;
    height: 2px;
    background: var(--progress-bg);
    border-radius: 2px;
    position: relative;
  }

  .progress-fill {
    height: 100%;
    background: var(--progress-fill);
    background-size: 300% 100%;
    border-radius: 2px;
    width: 0%;
    transition: width 2.4s cubic-bezier(0.16, 1, 0.3, 1);
    animation: gradShift 5s ease-in-out infinite;
    position: relative;
  }

  @keyframes gradShift {
    0%,100% { background-position: 0% 0; }
    50% { background-position: 100% 0; }
  }

  /* Glowing tip dot */
  .progress-fill::after {
    content: '';
    position: absolute;
    right: -3px;
    top: 50%;
    transform: translateY(-50%);
    width: 9px; height: 9px;
    border-radius: 50%;
    background: var(--accent);
    box-shadow: 0 0 10px var(--accent), 0 0 20px rgba(201,169,110,0.5);
    animation: pulseGlow 2.2s ease-in-out infinite;
  }
  @keyframes pulseGlow {
    0%,100% { box-shadow: 0 0 8px var(--accent), 0 0 16px rgba(201,169,110,0.4); }
    50% { box-shadow: 0 0 16px var(--accent), 0 0 32px rgba(201,169,110,0.65), 0 0 55px rgba(201,169,110,0.2); }
  }

  /* Scanline sweep */
  .progress-track::after {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(90deg, transparent, rgba(201,169,110,0.08), transparent);
    background-size: 200% 100%;
    animation: scanline 3.5s ease-in-out infinite;
    pointer-events: none;
    border-radius: 4px;
  }
  @keyframes scanline {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  /* Stats */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2px;
    margin-bottom: 72px;
    background: var(--border);
    border: 1px solid var(--border);
    border-radius: 6px;
    overflow: hidden;
  }

  .stat-card {
    background: var(--surface);
    padding: 32px 28px;
    transition: background 0.35s, transform 0.3s;
    position: relative;
    overflow: hidden;
    cursor: default;
  }

  /* Hover shimmer on cards */
  .stat-card::before {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 60%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(201,169,110,0.04), transparent);
    transition: left 0s;
  }
  .stat-card:hover { background: var(--surface2); transform: translateY(-2px); }
  .stat-card:hover::before { left: 150%; transition: left 0.6s ease; }

  /* Accent corner */
  .stat-card::after {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 0; height: 2px;
    background: var(--accent);
    transition: width 0.4s ease;
  }
  .stat-card:hover::after { width: 100%; }

  .stat-value {
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    font-weight: 300;
    letter-spacing: -0.02em;
    color: var(--text);
    margin-bottom: 8px;
    font-variant-numeric: tabular-nums;
  }

  .stat-key {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
  }

  /* Time remaining */
  .time-remaining {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 48px 40px;
    margin-bottom: 72px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  /* Corner brackets */
  .time-remaining::before, .time-remaining::after {
    content: '';
    position: absolute;
    width: 36px; height: 36px;
    border-color: rgba(201,169,110,0.18);
    border-style: solid;
    transition: width 0.4s ease, height 0.4s ease, border-color 0.4s;
  }
  .time-remaining::before { top: 14px; left: 14px; border-width: 1px 0 0 1px; }
  .time-remaining::after { bottom: 14px; right: 14px; border-width: 0 1px 1px 0; }
  .time-remaining:hover::before, .time-remaining:hover::after {
    width: 56px; height: 56px;
    border-color: rgba(201,169,110,0.4);
  }

  .time-remaining-label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 36px;
  }

  .time-parts {
    display: flex;
    justify-content: center;
    gap: 56px;
    flex-wrap: wrap;
  }

  .time-part { text-align: center; }

  .time-part-val {
    font-size: clamp(2rem, 5vw, 3.8rem);
    font-weight: 300;
    color: var(--text);
    display: block;
    letter-spacing: -0.03em;
    font-variant-numeric: tabular-nums;
    text-shadow: 0 0 30px rgba(201,169,110,0.1);
  }

  .time-part-unit {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
    margin-top: 8px;
  }

  .time-divider {
    font-size: 2.5rem;
    color: rgba(201,169,110,0.2);
    align-self: center;
    font-weight: 300;
    animation: blink 3s ease-in-out infinite;
  }
  @keyframes blink {
    0%,100% { opacity: 0.25; }
    50% { opacity: 0.9; }
  }

  /* Week Grid */
  .week-grid-section { margin-bottom: 72px; }

  .week-grid-title {
    font-size: 1rem;
    font-weight: 300;
    color: var(--muted);
    margin-bottom: 20px;
    font-style: italic;
  }

  #weekGrid {
    display: flex;
    flex-wrap: wrap;
    gap: 2.5px;
  }

  .week-dot {
    width: 6px; height: 6px;
    border-radius: 1px;
    background: rgba(255,255,255,0.04);
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
  }

  .week-dot:hover {
    transform: scale(2);
    background: rgba(201,169,110,0.5) !important;
    box-shadow: 0 0 6px rgba(201,169,110,0.5);
    z-index: 1;
  }

  .week-dot.lived { background: rgba(201,169,110,0.42); }

  .week-dot.current {
    background: var(--accent);
    animation: currentPulse 2.5s ease-in-out infinite;
  }
  @keyframes currentPulse {
    0%,100% { box-shadow: 0 0 4px rgba(201,169,110,0.6); }
    50% { box-shadow: 0 0 12px rgba(201,169,110,0.95), 0 0 22px rgba(201,169,110,0.35); }
  }

  /* Milestones */
  .milestones {
    margin-top: 20px;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
  }

  .milestone {
    font-family: 'DM Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--muted);
    padding: 3px 10px;
    border: 1px solid var(--border);
    border-radius: 20px;
    transition: all 0.3s;
    cursor: default;
  }

  .milestone.passed {
    border-color: rgba(201,169,110,0.35);
    color: var(--accent);
    background: rgba(201,169,110,0.05);
  }

  .milestone:hover {
    transform: translateY(-2px);
    border-color: var(--accent);
    color: var(--accent);
    box-shadow: 0 4px 12px rgba(201,169,110,0.1);
  }

  /* Reflection */
  .reflection {
    border-top: 1px solid var(--border);
    padding-top: 64px;
    text-align: center;
  }

  .reflection-quote {
    font-size: clamp(1.25rem, 3vw, 1.9rem);
    font-weight: 300;
    line-height: 1.65;
    color: var(--text);
    font-style: italic;
    max-width: 580px;
    margin: 0 auto 20px;
    min-height: 3em;
  }

  /* Cursor blink during typewriter */
  .reflection-quote.typing::after {
    content: '|';
    color: var(--accent);
    animation: cursorBlink 0.7s step-end infinite;
  }
  @keyframes cursorBlink {
    0%,100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .reflection-sub {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.14em;
    color: var(--accent);
    opacity: 0;
    transition: opacity 1s ease;
  }

  .btn-restart {
    margin-top: 64px;
    background: transparent;
    border: none;
    color: var(--muted);
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    cursor: pointer;
    padding: 8px 0;
    border-bottom: 1px solid transparent;
    transition: color 0.35s, border-color 0.35s, letter-spacing 0.35s;
    display: inline-block;
  }

  .btn-restart:hover {
    color: var(--accent);
    border-color: var(--accent);
    letter-spacing: 0.22em;
  }

  /* ═══ FOOTER ═══ */
  footer {
    position: relative;
    z-index: 2;
    border-top: 1px solid var(--border);
    padding: 44px 24px 48px;
    text-align: center;
    background: linear-gradient(to bottom, transparent, rgba(201,169,110,0.015));
  }

  .footer-inner {
    max-width: 760px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 14px;
  }

  .footer-ornament {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 4px;
  }

  .footer-ornament-line {
    width: 40px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(201,169,110,0.3));
  }

  .footer-ornament-line:last-child {
    background: linear-gradient(90deg, rgba(201,169,110,0.3), transparent);
  }

  .footer-ornament-dot {
    width: 5px; height: 5px;
    border-radius: 50%;
    background: var(--accent);
    opacity: 0.4;
    animation: footerPulse 3.5s ease-in-out infinite;
  }
  @keyframes footerPulse {
    0%,100% { opacity: 0.25; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.6); box-shadow: 0 0 8px rgba(201,169,110,0.4); }
  }

  .footer-credit {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .footer-credit .author {
    color: var(--accent);
    position: relative;
    display: inline-block;
    transition: color 0.3s;
  }

  .footer-credit .author::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background: var(--accent);
    transition: width 0.5s cubic-bezier(0.16,1,0.3,1);
  }

  footer:hover .footer-credit .author::after { width: 100%; }

  .footer-tagline {
    font-family: 'Cormorant Garamond', serif;
    font-size: 0.9rem;
    font-style: italic;
    color: rgba(107,114,128,0.4);
    letter-spacing: 0.04em;
  }

  /* ═══ KEYFRAMES ═══ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes slideInLeft {
    from { opacity: 0; transform: translateX(-22px); }
    to { opacity: 1; transform: translateX(0); }
  }

  /* ═══ MOBILE ═══ */
  @media (max-width: 600px) {
    .stats-grid { grid-template-columns: 1fr; }
    .time-parts { gap: 28px; }
    .time-divider { display: none; }
    h1 { font-size: 2.4rem; }
    .time-remaining { padding: 36px 24px; }
  }

  ::-webkit-scrollbar { width: 3px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: rgba(201,169,110,0.18); border-radius: 2px; }
</style>
</head>
<body>

<canvas id="particleCanvas"></canvas>
<div class="orb orb-1"></div>
<div class="orb orb-2"></div>
<div class="orb orb-3"></div>
<div class="grain"></div>
<div id="transitionOverlay"></div>

<div class="container">

  <!-- LANDING -->
  <section id="landing">
    <div class="eyebrow"><span class="eyebrow-line"></span>Life Progress Bar</div>
    <h1>Time is your most <em>valuable</em> asset.</h1>
    <p class="subtitle">See how much of your journey has already unfolded — and how much still lies ahead.</p>

    <div class="form-block">
      <div class="form-row">
        <div class="field">
          <label for="dob">Date of Birth</label>
          <input type="date" id="dob" max="">
        </div>
        <div class="field">
          <label for="lifespan">Projected Lifespan</label>
          <select id="lifespan">
            <option value="70">70 years</option>
            <option value="75">75 years</option>
            <option value="80" selected>80 years</option>
            <option value="85">85 years</option>
            <option value="90">90 years</option>
          </select>
        </div>
      </div>
      <button class="btn-primary" id="visualizeBtn" onclick="calculate()">
        <span>Visualize My Life</span>
      </button>
      <div class="error" id="error">Please enter a valid date of birth.</div>
    </div>
  </section>

  <!-- RESULTS -->
  <section id="results">

    <div class="section-label reveal">Your Journey</div>

    <div class="progress-section reveal">
      <div class="progress-header">
        <div class="progress-label">Life completion</div>
        <div class="progress-pct" id="pctDisplay">0.00<span>%</span></div>
      </div>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="milestones" id="milestones"></div>
    </div>

    <div class="stats-grid reveal">
      <div class="stat-card">
        <div class="stat-value" id="daysLived">—</div>
        <div class="stat-key">Days Lived</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="weeksLived">—</div>
        <div class="stat-key">Weeks Lived</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="daysRemaining">—</div>
        <div class="stat-key">Estimated Days Remaining</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="ageLived">—</div>
        <div class="stat-key">Age Today</div>
      </div>
    </div>

    <div class="time-remaining reveal">
      <div class="time-remaining-label">Time remaining in this journey</div>
      <div class="time-parts">
        <div class="time-part">
          <span class="time-part-val" id="yearsLeft">—</span>
          <div class="time-part-unit">Years</div>
        </div>
        <div class="time-divider">·</div>
        <div class="time-part">
          <span class="time-part-val" id="monthsLeft">—</span>
          <div class="time-part-unit">Months</div>
        </div>
        <div class="time-divider">·</div>
        <div class="time-part">
          <span class="time-part-val" id="daysLeft">—</span>
          <div class="time-part-unit">Days</div>
        </div>
      </div>
    </div>

    <div class="week-grid-section reveal">
      <div class="section-label">Weeks of Life</div>
      <p class="week-grid-title">Each square is one week. <span id="gridNote"></span></p>
      <div id="weekGrid"></div>
    </div>

    <div class="reflection reveal">
      <div class="section-label">Reflection</div>
      <div class="reflection-quote" id="reflectionQuote"></div>
      <div class="reflection-sub" id="reflectionSub"></div>
      <br>
      <button class="btn-restart" onclick="restart()">← Begin again</button>
    </div>

  </section>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-ornament">
      <div class="footer-ornament-line"></div>
      <div class="footer-ornament-dot"></div>
      <div class="footer-ornament-line"></div>
    </div>
    <div class="footer-credit">Developed by <span class="author">Wahab Khan</span></div>
    <div class="footer-tagline">Time is finite. Make it count.</div>
  </div>
</footer>

<script>
/* ─── PARTICLE SYSTEM ─── */
const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
let W, H, particles = [];

function resizeCanvas() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

class Particle {
  constructor() { this.init(); this.y = Math.random() * H; }
  init() {
    this.x = Math.random() * W;
    this.y = H + 10;
    this.size = Math.random() * 1.3 + 0.2;
    this.vx = (Math.random() - 0.5) * 0.18;
    this.vy = -(Math.random() * 0.22 + 0.06);
    this.alpha = Math.random() * 0.45 + 0.05;
    this.life = 0;
    this.maxLife = Math.random() * 320 + 180;
    this.gold = Math.random() > 0.65;
    this.twinkle = Math.random() * Math.PI * 2;
    this.twinkleSpeed = Math.random() * 0.04 + 0.01;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.life++;
    this.twinkle += this.twinkleSpeed;
    if (this.life > this.maxLife || this.y < -10) this.init();
  }
  draw() {
    const fade = Math.min(this.life / 80, 1) * Math.min((this.maxLife - this.life) / 80, 1);
    const twinkleAlpha = (0.7 + 0.3 * Math.sin(this.twinkle));
    ctx.save();
    ctx.globalAlpha = this.alpha * fade * twinkleAlpha;
    if (this.gold) {
      ctx.fillStyle = '#c9a96e';
      ctx.shadowBlur = 8;
      ctx.shadowColor = 'rgba(201,169,110,0.8)';
    } else {
      ctx.fillStyle = '#7090b0';
      ctx.shadowBlur = 4;
      ctx.shadowColor = 'rgba(100,130,180,0.5)';
    }
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  }
}

for (let i = 0; i < 90; i++) {
  const p = new Particle();
  p.y = Math.random() * H;
  p.life = Math.random() * p.maxLife;
  particles.push(p);
}

(function loop() {
  ctx.clearRect(0, 0, W, H);
  particles.forEach(p => { p.update(); p.draw(); });
  requestAnimationFrame(loop);
})();

/* ─── RIPPLE EFFECT ─── */
document.getElementById('visualizeBtn').addEventListener('click', function(e) {
  const r = this.getBoundingClientRect();
  const rip = document.createElement('span');
  rip.className = 'ripple';
  const s = Math.max(r.width, r.height);
  Object.assign(rip.style, {
    width: s + 'px', height: s + 'px',
    left: (e.clientX - r.left - s / 2) + 'px',
    top: (e.clientY - r.top - s / 2) + 'px'
  });
  this.appendChild(rip);
  setTimeout(() => rip.remove(), 700);
});

/* ─── DATA ─── */
document.getElementById('dob').max = new Date().toISOString().split('T')[0];

const quotes = [
  { q: "The present moment is the only place where life is lived. What will you do with it?", s: "Reflect. Decide. Begin." },
  { q: "Every day that passes is a page written. Make sure the story is worth reading.", s: "Write it well." },
  { q: "Time is the canvas. How you spend each day is the brushstroke.", s: "Paint with intention." },
  { q: "You cannot reclaim a single day. But you can determine what the next one becomes.", s: "Choose wisely." },
  { q: "The clock moves regardless. What moves with it is entirely yours to decide.", s: "Move with purpose." },
  { q: "Scarcity creates value. Your time is finite — and therefore precious beyond measure.", s: "Spend it accordingly." },
  { q: "A life well-examined becomes a life better lived.", s: "Examine. Elevate. Endure." },
];

const milestoneYears = [18, 21, 25, 30, 40, 50, 60, 70];

/* ─── CALCULATE ─── */
function calculate() {
  const dobVal = document.getElementById('dob').value;
  const lifespan = parseInt(document.getElementById('lifespan').value);
  const errorEl = document.getElementById('error');

  if (!dobVal) {
    showError('Please enter a valid date of birth.');
    return;
  }

  const dob = new Date(dobVal);
  const now = new Date();

  if (dob >= now) {
    showError('Please enter a date in the past.');
    return;
  }

  errorEl.style.display = 'none';

  const msPerDay = 86400000;
  const daysLived = Math.floor((now - dob) / msPerDay);
  const totalDays = Math.floor(lifespan * 365.25);
  const daysRem = Math.max(0, totalDays - daysLived);
  const weeksLivedN = Math.floor(daysLived / 7);
  const totalWeeksN = Math.floor(totalDays / 7);
  const weeksDisplayed = Math.min(weeksLivedN, totalWeeksN);
  const pct = Math.min(100, (daysLived / totalDays) * 100);

  let ageYears = now.getFullYear() - dob.getFullYear();
  let ageMonths = now.getMonth() - dob.getMonth();
  let ageDays = now.getDate() - dob.getDate();
  if (ageDays < 0) { ageMonths--; ageDays += 30; }
  if (ageMonths < 0) { ageYears--; ageMonths += 12; }

  const endDate = new Date(dob);
  endDate.setFullYear(endDate.getFullYear() + lifespan);
  let yLeft = endDate.getFullYear() - now.getFullYear();
  let mLeft = endDate.getMonth() - now.getMonth();
  let dLeft = endDate.getDate() - now.getDate();
  if (dLeft < 0) { mLeft--; dLeft += 30; }
  if (mLeft < 0) { yLeft--; mLeft += 12; }
  yLeft = Math.max(0, yLeft); mLeft = Math.max(0, mLeft); dLeft = Math.max(0, dLeft);

  // Transition
  const overlay = document.getElementById('transitionOverlay');
  overlay.classList.add('active');

  setTimeout(() => {
    document.getElementById('landing').style.display = 'none';
    const results = document.getElementById('results');
    results.style.display = 'block';
    overlay.classList.remove('active');

    // Stagger sections
    const revealEls = results.querySelectorAll('.reveal');
    revealEls.forEach((el, i) => setTimeout(() => el.classList.add('in'), i * 130 + 80));

    // Animate numbers
    animateNum('daysLived', daysLived, true, 2000);
    animateNum('weeksLived', weeksDisplayed, true, 2000);
    animateNum('daysRemaining', daysRem, true, 2000);
    document.getElementById('ageLived').textContent = ageYears;
    animateNum('yearsLeft', yLeft, false, 1800);
    animateNum('monthsLeft', mLeft, false, 1800);
    animateNum('daysLeft', dLeft, false, 1800);

    // Progress bar (delayed for reveal anim)
    setTimeout(() => {
      document.getElementById('progressFill').style.width = pct.toFixed(2) + '%';
      animatePct(pct);
    }, 350);

    renderMilestones(ageYears, lifespan);
    renderWeekGrid(daysLived, lifespan, totalWeeksN);

    // Typewriter quote
    const q = quotes[Math.floor(Math.random() * quotes.length)];
    const subEl = document.getElementById('reflectionSub');
    subEl.style.opacity = '0';
    subEl.textContent = '';
    setTimeout(() => {
      typewriter('reflectionQuote', `"${q.q}"`, 22, () => {
        subEl.textContent = q.s;
        setTimeout(() => subEl.style.opacity = '0.75', 50);
      });
    }, revealEls.length * 130 + 200);

  }, 500);
}

function showError(msg) {
  const el = document.getElementById('error');
  el.textContent = msg;
  el.style.display = 'block';
  el.classList.remove('shake');
  void el.offsetWidth;
  el.classList.add('shake');
}

/* ─── TYPEWRITER ─── */
function typewriter(id, text, speed, cb) {
  const el = document.getElementById(id);
  el.textContent = '';
  el.classList.add('typing');
  let i = 0;
  const iv = setInterval(() => {
    el.textContent += text[i++];
    if (i >= text.length) {
      clearInterval(iv);
      el.classList.remove('typing');
      if (cb) setTimeout(cb, 200);
    }
  }, speed);
}

/* ─── ANIMATE NUMBER ─── */
function animateNum(id, target, comma, dur) {
  const el = document.getElementById(id);
  const start = performance.now();
  function frame(now) {
    const p = Math.min((now - start) / dur, 1);
    const ease = 1 - Math.pow(1 - p, 4);
    const v = Math.floor(ease * target);
    el.textContent = comma ? v.toLocaleString() : v;
    if (p < 1) requestAnimationFrame(frame);
    else el.textContent = comma ? target.toLocaleString() : target;
  }
  requestAnimationFrame(frame);
}

/* ─── ANIMATE PERCENTAGE ─── */
function animatePct(target) {
  const el = document.getElementById('pctDisplay');
  const dur = 2600;
  const start = performance.now();
  function frame(now) {
    const p = Math.min((now - start) / dur, 1);
    const ease = 1 - Math.pow(1 - p, 4);
    el.innerHTML = `${(ease * target).toFixed(2)}<span>%</span>`;
    if (p < 1) requestAnimationFrame(frame);
    else el.innerHTML = `${target.toFixed(2)}<span>%</span>`;
  }
  requestAnimationFrame(frame);
}

/* ─── MILESTONES ─── */
function renderMilestones(currentAge, lifespan) {
  const container = document.getElementById('milestones');
  container.innerHTML = '';
  milestoneYears.filter(y => y <= lifespan).forEach((y, i) => {
    const el = document.createElement('div');
    el.className = 'milestone' + (y <= currentAge ? ' passed' : '');
    el.textContent = y;
    el.style.cssText = 'opacity:0;transform:translateY(10px);transition:opacity 0.4s ease,transform 0.4s ease';
    container.appendChild(el);
    setTimeout(() => { el.style.opacity = '1'; el.style.transform = 'translateY(0)'; }, 700 + i * 70);
  });
}

/* ─── WEEK GRID ─── */
function renderWeekGrid(daysLived, lifespan, totalWeeksN) {
  const grid = document.getElementById('weekGrid');
  grid.innerHTML = '';
  const totalWeeks = totalWeeksN || Math.floor(lifespan * 365.25 / 7);
  const wLived = Math.min(Math.floor(daysLived / 7), totalWeeks);
  document.getElementById('gridNote').textContent =
    `${wLived.toLocaleString()} of ${totalWeeks.toLocaleString()} weeks lived.`;

  const show = Math.min(totalWeeks, 4680);
  const frag = document.createDocumentFragment();
  for (let i = 0; i < show; i++) {
    const dot = document.createElement('div');
    if (i < wLived - 1) { dot.className = 'week-dot lived'; dot.style.opacity = '0'; }
    else if (i === wLived - 1) { dot.className = 'week-dot current'; dot.style.opacity = '0'; }
    else dot.className = 'week-dot';
    frag.appendChild(dot);
  }
  grid.appendChild(frag);

  // Wave animate lived dots
  const livedDots = Array.from(grid.querySelectorAll('.week-dot.lived, .week-dot.current'));
  const batch = 40;
  let b = 0;
  function animateBatch() {
    const s = b * batch, e = Math.min(s + batch, livedDots.length);
    for (let j = s; j < e; j++) {
      livedDots[j].style.transition = 'opacity 0.35s ease';
      livedDots[j].style.opacity = '1';
    }
    b++;
    if (b * batch < livedDots.length) setTimeout(animateBatch, 10);
  }
  setTimeout(animateBatch, 900);
}

/* ─── RESTART ─── */
function restart() {
  const overlay = document.getElementById('transitionOverlay');
  overlay.classList.add('active');
  setTimeout(() => {
    const results = document.getElementById('results');
    results.style.display = 'none';
    results.querySelectorAll('.reveal').forEach(el => el.classList.remove('in'));
    document.getElementById('progressFill').style.width = '0%';
    document.getElementById('landing').style.display = 'flex';
    overlay.classList.remove('active');
  }, 500);
}

/* ─── KEYBOARD ─── */
document.getElementById('dob').addEventListener('keydown', e => { if (e.key === 'Enter') calculate(); });
</script>
</body>
</html>
